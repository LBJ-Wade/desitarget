#- SV primary survey targets bit mask: dark survey + calib + 
sv1_desi_mask:
    - [LRG,         0, "LRG", {obsconditions: DARK}]
    - [ELG,         1, "ELG", {obsconditions: DARK|GRAY}]
    - [QSO,         2, "QSO", {obsconditions: DARK}]

    #- ADM LRG sub-classes
    - [LRG_OPT,     3, "LRG from baseline version of optical cuts",             {obsconditions: DARK}]
    - [LRG_IR,      4, "LRG from baseline version of IR cuts",                  {obsconditions: DARK}]
    - [LRG_SV_OPT,  5, "LRG from relaxed version of optical cuts",              {obsconditions: DARK}]
    - [LRG_SV_IR,   6, "LRG from relaxed version of IR cuts",                   {obsconditions: DARK}]
    - [LOWZ_FILLER, 7, "LRG-like low-z filler sample (NOT used for SV1)",  {obsconditions: DARK}]

    #- ADM ELG sub-classes
    - [ELG_SV_GTOT,        8, "ELG from relaxed version of FDR cuts and g-limit",        {obsconditions: DARK|GRAY}]
    - [ELG_SV_GFIB,        9, "ELG from relaxed version of FDR cuts and g-fiber-limit",  {obsconditions: DARK|GRAY}]
    - [ELG_FDR_GTOT,      10, "ELG from FDR cuts with g-mag-limit",                      {obsconditions: DARK|GRAY}]
    - [ELG_FDR_GFIB,      11, "ELG from FDR cuts with g-fiber-mag-limit",                {obsconditions: DARK|GRAY}]

    #- ADM QSO sub-classes
    - [QSO_COLOR_4PASS,   12, "Low-z (tracer) QSO using color cuts",          {obsconditions: DARK}]
    - [QSO_RF_4PASS,      13, "Low-z (tracer) QSO using random forest",       {obsconditions: DARK}]
    - [QSO_COLOR_8PASS,   14, "High-z (Lyman-Alpha) QSO using color cuts",    {obsconditions: DARK}]
    - [QSO_RF_8PASS,      15, "High-z (Lyman-Alpha) QSO using random forest", {obsconditions: DARK}]
    - [QSO_HZ_F,          16, "QSO at high-redshift and faint",               {obsconditions: DARK}]
    - [QSO_Z5,            17, "z~5 QSO",                                      {obsconditions: DARK}]

    #- North vs. South selections for different sub-classes
    - [LRG_OPT_NORTH,     18, "LRG from baseline version of optical cuts tuned for Bok/Mosaic",       {obsconditions: DARK}]
    - [LRG_IR_NORTH,      19, "LRG from baseline version of IR cuts tuned for Bok/Mosaic",            {obsconditions: DARK}]
    - [LRG_SV_OPT_NORTH,  20, "LRG from relaxed version of optical cuts tuned for Bok/Mosaic",        {obsconditions: DARK}]
    - [LRG_SV_IR_NORTH,   21, "LRG from relaxed version of IR cuts tuned for Bok/Mosaic",             {obsconditions: DARK}]
    - [LOWZ_FILLER_NORTH, 22, "LRG-like low-z filler sample tuned for Bok/Mosaic (NOT used for SV1)", {obsconditions: DARK}]

    - [LRG_OPT_SOUTH,     23, "LRG from baseline version of optical cuts tuned for DECam",       {obsconditions: DARK}]
    - [LRG_IR_SOUTH,      24, "LRG from baseline version of IR cuts tuned for DECam",            {obsconditions: DARK}]
    - [LRG_SV_OPT_SOUTH,  25, "LRG from relaxed version of optical cuts tuned for DECam",        {obsconditions: DARK}]
    - [LRG_SV_IR_SOUTH,   26, "LRG from relaxed version of IR cuts tuned for DECam",             {obsconditions: DARK}]
    - [LOWZ_FILLER_SOUTH, 27, "LRG-like low-z filler sample tuned for DECam (NOT used for SV1)", {obsconditions: DARK}]

    - [ELG_SV_GTOT_NORTH,      28, "ELG from relaxed version of FDR cuts and g-limit for Bok/Mosaic",        {obsconditions: DARK|GRAY}]
    - [ELG_SV_GFIB_NORTH,      29, "ELG from relaxed version of FDR cuts and g-fiber-limit for Bok/Mosaic",  {obsconditions: DARK|GRAY}]
    - [ELG_FDR_GTOT_NORTH,     30, "ELG from FDR cuts with g-mag-limit for Bok/Mosaic",                      {obsconditions: DARK|GRAY}]
    - [ELG_FDR_GFIB_NORTH,     31, "ELG from FDR cuts with g-fiber-mag-limit for Bok/Mosaic",                {obsconditions: DARK|GRAY}]

    #- ADM leave 32-37 reserved for calibration targets (to mirror the main survey)

    - [ELG_SV_GTOT_SOUTH,      38, "ELG from relaxed version of FDR cuts and g-limit for DECam",        {obsconditions: DARK|GRAY}]
    - [ELG_SV_GFIB_SOUTH,      39, "ELG from relaxed version of FDR cuts and g-fiber-limit for DECam",  {obsconditions: DARK|GRAY}]
    - [ELG_FDR_GTOT_SOUTH,     40, "ELG from FDR cuts with g-mag-limit for DECam",                      {obsconditions: DARK|GRAY}]
    - [ELG_FDR_GFIB_SOUTH,     41, "ELG from FDR cuts with g-fiber-mag-limit for DECam",                {obsconditions: DARK|GRAY}]

    - [QSO_COLOR_4PASS_NORTH, 42, "Low-z (tracer) QSO using color cuts tuned for Bok/Mosaic",          {obsconditions: DARK}]
    - [QSO_RF_4PASS_NORTH,    43, "Low-z (tracer) QSO using random forest tuned for Bok/Mosaic",       {obsconditions: DARK}]
    - [QSO_COLOR_8PASS_NORTH, 44, "High-z (Lyman-Alpha) QSO using color cuts tuned for Bok/Mosaic",    {obsconditions: DARK}]
    - [QSO_RF_8PASS_NORTH,    45, "High-z (Lyman-Alpha) QSO using random forest tuned for Bok/Mosaic", {obsconditions: DARK}]
    - [QSO_HZ_F_NORTH,        46, "QSO at high-redshift and faint tuned for Bok/Mosaic",               {obsconditions: DARK}]
    - [QSO_Z5_NORTH,          47, "z~5 QSO tuned for Bok/Mosaic",                                      {obsconditions: DARK}]

    - [QSO_COLOR_4PASS_SOUTH, 48, "Low-z (tracer) QSO using color cuts tuned for DECam",               {obsconditions: DARK}]

    #- ADM retain bits 49-52 for masking/convenience (to mirror the main survey)

    - [QSO_RF_4PASS_SOUTH,    53, "Low-z (tracer) QSO using random forest tuned for DECam",            {obsconditions: DARK}]
    - [QSO_COLOR_8PASS_SOUTH, 54, "High-z (Lyman-Alpha) QSO using color cuts tuned for DECam",         {obsconditions: DARK}]
    - [QSO_RF_8PASS_SOUTH,    55, "High-z (Lyman-Alpha) QSO using random forest tuned for DECam",      {obsconditions: DARK}]
    - [QSO_HZ_F_SOUTH,        56, "QSO at high-redshift and faint tuned for DECam",                    {obsconditions: DARK}]
    - [QSO_Z5_SOUTH,          57, "z~5 QSO tuned for DECam",                                           {obsconditions: DARK}]

    #- Calibration targets
    - [SKY,         32, "Blank sky locations",
        {obsconditions: DARK|GRAY|BRIGHT|POOR|TWILIGHT12|TWILIGHT18}]
    - [STD_FAINT,   33, "Standard stars for dark/gray conditions", {obsconditions: DARK|GRAY}]
    - [STD_WD,      34, "White Dwarf stars", {obsconditions: DARK|GRAY|BRIGHT}]
    - [STD_BRIGHT,  35, "Standard stars for BRIGHT conditions", {obsconditions: BRIGHT}]
    - [BAD_SKY,     36, "Blank sky locations that are imperfect but still useable",
        {obsconditions: DARK|GRAY|BRIGHT|POOR|TWILIGHT12|TWILIGHT18}]
    - [SUPP_SKY,    37, "SKY is based on Gaia-avoidance (SKY will be set, too)",
        {obsconditions: DARK|GRAY|BRIGHT|POOR|TWILIGHT12|TWILIGHT18}]

    #- Reserved convenience bits that can, e.g., be set downstream of desitarget
    - [NO_TARGET,   49, "No known target at this location",
        {obsconditions: DARK|GRAY|BRIGHT|POOR|TWILIGHT12|TWILIGHT18}]

    #- Related to bright object masking
    - [BRIGHT_OBJECT,       50, "Known bright object to avoid",             {obsconditions: APOCALYPSE}]
    - [IN_BRIGHT_OBJECT,    51, "Too near a bright object; DO NOT OBSERVE", {obsconditions: APOCALYPSE}]
    - [NEAR_BRIGHT_OBJECT,  52, "Near a bright object but ok to observe",
            {obsconditions: DARK|GRAY|BRIGHT|POOR|TWILIGHT12|TWILIGHT18}]

    #- A bit for another survey is set
    - [BGS_ANY,             60, "Any BGS bit is set",  {obsconditions: BRIGHT}]
    - [MWS_ANY,             61, "Any MWS bit is set",  {obsconditions: BRIGHT}]
    - [SCND_ANY,            62, "Any secondary bit is set",
        {obsconditions: DARK|GRAY|BRIGHT|POOR|TWILIGHT12|TWILIGHT18}]

#- Bright Galaxy Survey SV targets
sv1_bgs_mask:
    - [BGS_FAINT,           0, "BGS faint targets",              {obsconditions: BRIGHT|GRAY|DARK}]
    - [BGS_BRIGHT,          1, "BGS bright targets",             {obsconditions: BRIGHT}]
    - [BGS_FAINT_EXT,       2, "BGS faint extended targets",     {obsconditions: BRIGHT}]
    - [BGS_LOWQ,            3, "BGS low quality targets",        {obsconditions: BRIGHT}]
    - [BGS_FIBMAG,          4, "BGS fiber magnitude targets",    {obsconditions: BRIGHT}]

    #- BGS North vs. South selections
    - [BGS_FAINT_NORTH,     8, "BGS faint cuts tuned for Bok/Mosaic",           {obsconditions: BRIGHT}]
    - [BGS_BRIGHT_NORTH,    9, "BGS bright cuts tuned for Bok/Mosaic",          {obsconditions: BRIGHT}]
    - [BGS_FAINT_EXT_NORTH, 10, "BGS faint extended cuts tuned for Bok/Mosaic", {obsconditions: BRIGHT}]
    - [BGS_LOWQ_NORTH,      11, "BGS low quality cuts tuned for Bok/Mosaic",    {obsconditions: BRIGHT}]
    - [BGS_FIBMAG_NORTH,    12, "BGS low quality cuts tuned for Bok/Mosaic",    {obsconditions: BRIGHT}]
    - [BGS_FAINT_SOUTH,     16, "BGS faint cuts tuned for DECam",               {obsconditions: BRIGHT}]
    - [BGS_BRIGHT_SOUTH,    17, "BGS bright cuts tuned for DECam",              {obsconditions: BRIGHT}]
    - [BGS_FAINT_EXT_SOUTH, 18, "BGS faint extended cuts tuned for DECam",      {obsconditions: BRIGHT}]
    - [BGS_LOWQ_SOUTH,      19, "BGS low quality cuts tuned for DECam",         {obsconditions: BRIGHT}]
    - [BGS_FIBMAG_SOUTH,    20, "BGS fiber magnitude cuts tuned for DECam",     {obsconditions: BRIGHT}]

    - [BGS_KNOWN_ANY,       40, "Known target from another survey",    {obsconditions: BRIGHT}]
    - [BGS_KNOWN_COLLIDED,  41, "BGS known SDSS/BOSS fiber collided",  {obsconditions: BRIGHT}]
    - [BGS_KNOWN_SDSS,      42, "BGS known SDSS targets",              {obsconditions: BRIGHT}]
    - [BGS_KNOWN_BOSS,      43, "BGS known BOSS targets",              {obsconditions: BRIGHT}]

#- Milky Way Survey SV targets
sv1_mws_mask:
    #- Bits 0-3 (7 ids)
    - [MWS_MAIN_BROAD,            0, "Milky Way Survey magnitude limited bulk sample",         {obsconditions: BRIGHT|GRAY|DARK}]
    - [MWS_WD,                    1, "Milky Way Survey White Dwarf (algorithmic selection)",   {obsconditions: BRIGHT|GRAY|DARK}]
    - [MWS_NEARBY,                2, "Milky Way Survey volume-complete ~100pc sample",         {obsconditions: BRIGHT|GRAY|DARK}]

    #- 4: MWS_MAIN north/south splits
    - [MWS_MAIN_BROAD_NORTH,      4, "Milky Way Survey targets from Bok/Mosaic",               {obsconditions: BRIGHT|GRAY|DARK}]
    - [MWS_MAIN_BROAD_SOUTH,      5, "Milky Way Survey targets from DECam",                    {obsconditions: BRIGHT|GRAY|DARK}]
    - [MWS_BHB,                   6, "Milky Way Survey BHBs",                                  {obsconditions: BRIGHT|GRAY|DARK}]

    # Fainter MWS_MAIN extension for SV, selected on magnitude only
    - [MWS_MAIN_FAINT,           14, "MWS magnitude limited sample from DECam", {obsconditions: BRIGHT|GRAY|DARK}]
    - [MWS_MAIN_FAINT_NORTH,     15, "MWS magnitude limited sample from DECam", {obsconditions: BRIGHT|GRAY|DARK}]
    - [MWS_MAIN_FAINT_SOUTH,     16, "MWS magnitude limited sample from DECam", {obsconditions: BRIGHT|GRAY|DARK}]

    # ADM Standard stars based only on Gaia.
    - [GAIA_STD_FAINT,      33, "Standard stars for dark/gray conditions",   {obsconditions: DARK|GRAY}]
    - [GAIA_STD_WD,         34, "White Dwarf stars",                         {obsconditions: DARK|GRAY|BRIGHT}]
    - [GAIA_STD_BRIGHT,     35, "Standard stars for BRIGHT conditions",      {obsconditions: BRIGHT}]

    # ADM back-up targets for poor conditions.
    - [BACKUP_BRIGHT,       60, "Bright backup Gaia targets",        {obsconditions: DARK|GRAY|BRIGHT|POOR|TWILIGHT12|TWILIGHT18}]
    - [BACKUP_FAINT,        61, "Fainter backup Gaia targets",       {obsconditions: DARK|GRAY|BRIGHT|POOR|TWILIGHT12|TWILIGHT18}]
    - [BACKUP_VERY_FAINT,   62, "Even fainter backup Gaia targets",  {obsconditions: DARK|GRAY|BRIGHT|POOR|TWILIGHT12|TWILIGHT18}]

#- ADM SV secondary survey targets bit mask.
#- ADM note that the 'filenames', here, should all be present in the
#- ADM directory that corresponds to the $SECONDARY_DIR/sv1 environment
#- ADM variable, e.g. $SECONDARY_DIR/sv1/veto.txt for VETO targets.
sv1_scnd_mask:
    - [VETO,                 0, "Never observe, even if a primary target bit is set",
        {obsconditions: DARK|GRAY|BRIGHT|POOR|TWILIGHT12|TWILIGHT18, filename: 'veto', flavor: 'SPARE'}]
    - [UDG,                  1, "See $SCND_DIR/sv1/docs/UDG.txt",                {obsconditions: DARK,        filename: 'UDG',                flavor: 'SPARE'}]
    - [FIRST_MALS,           2, "See $SCND_DIR/sv1/docs/FIRST_MALS.txt",         {obsconditions: DARK,        filename: 'FIRST_MALS',         flavor: 'SPARE'}]
# ADM the WD_BINARIES class was part of 0.48.0 but was then deprecated in favor of WD_BINARIES_DARK and WD_BINARIES_BRIGHT.
#   - [WD_BINARIES,          3, "See $SCND_DIR/sv1/docs/WD_BINARIES.txt",        {obsconditions: BRIGHT|DARK, filename: 'WD_BINARIES',        flavor: 'SPARE'}]
    - [LBG_TOMOG,            4, "See $SCND_DIR/sv1/docs/LBG_TOMOG.txt",          {obsconditions: DARK,        filename: 'LBG_TOMOG',          flavor: 'DEDICATED'}]
    - [QSO_RED,              5, "See $SCND_DIR/sv1/docs/QSO_RED.ipynb",          {obsconditions: DARK,        filename: 'QSO_RED',            flavor: 'QSO'}]
    - [M31_KNOWN,            6, "See $SCND_DIR/sv1/docs/M31_KNOWN.txt",          {obsconditions: DARK,        filename: 'M31_KNOWN',          flavor: 'DEDICATED'}]
    - [M31_QSO,              7, "See $SCND_DIR/sv1/docs/M31_QSO.txt.",           {obsconditions: DARK,        filename: 'M31_QSO',            flavor: 'DEDICATED'}]
    - [M31_STAR,             8, "See $SCND_DIR/sv1/docs/M31_STAR.txt",           {obsconditions: DARK,        filename: 'M31_STAR',           flavor: 'DEDICATED'}]
#   - [MWS_DDOGIANTS,        9, "See $SCND_DIR",                                 {obsconditions: BRIGHT,      filename: 'MWS_DDOGIANTS',      flavor: 'SPARE'}]
    - [MWS_CLUS_GAL_DEEP,   10, "See $SCND_DIR/sv1/docs/MWS_CLUS_GAL_DEEP.txt",  {obsconditions: DARK,        filename: 'MWS_CLUS_GAL_DEEP',  flavor: 'DEDICATED'}]
    - [LOW_MASS_AGN,        11, "See $SCND_DIR/sv1/docs/LOW_MASS_AGN.txt",       {obsconditions: DARK,        filename: 'LOW_MASS_AGN',       flavor: 'SPARE'}]
    - [FAINT_HPM,           12, "See $SCND_DIR/sv1/docs/FAINT_HPM.txt",          {obsconditions: DARK,        filename: 'FAINT_HPM',          flavor: 'SPARE'}]
    - [GW190412,            13, "See $SCND_DIR/sv1/docs/GW190412.ipynb",         {obsconditions: BRIGHT|DARK, filename: 'GW190412',           flavor: 'TOO'}]
    - [IC134191,            14, "See $SCND_DIR/sv1/docs/IC134191.ipynb",         {obsconditions: BRIGHT|DARK, filename: 'IC134191',           flavor: 'TOO'}]
    - [PV_BRIGHT,           15, "See $SCND_DIR/sv1/docs/PV_BRIGHT.ipynb",        {obsconditions: BRIGHT,      filename: 'PV_BRIGHT',          flavor: 'SPARE'}]
    - [PV_DARK,             16, "See $SCND_DIR/sv1/docs/PV_DARK.ipynb",          {obsconditions: DARK,        filename: 'PV_DARK',            flavor: 'SPARE'}]
    - [LOW_Z,               17, "See $SCND_DIR/sv1/docs/LOW_Z.ipynb",            {obsconditions: DARK,        filename: 'LOW_Z',              flavor: 'SPARE'}]
    - [BHB,                 18, "See $SCND_DIR/sv1/docs/BHB.txt",                {obsconditions: DARK,        filename: 'BHB',                flavor: 'SPARE'}]
    - [SPCV,                19, "See $SCND_DIR/sv1/docs/SPCV.txt",               {obsconditions: DARK,        filename: 'SPCV',               flavor: 'SPARE'}]
    - [DC3R2_GAMA,          20, "See $SCND_DIR/sv1/docs/DC3R2_GAMA.ipynb",       {obsconditions: DARK,        filename: 'DC3R2_GAMA',         flavor: 'SPARE'}]
    - [UNWISE_BLUE,         21, "See $SCND_DIR/sv1/docs/UNWISE_BLUE.txt",        {obsconditions: DARK,        filename: 'UNWISE_BLUE',        flavor: 'DEDICATED'}]
    - [UNWISE_GREEN,        22, "See $SCND_DIR/sv1/docs/UNWISE_GREEN.txt",       {obsconditions: DARK,        filename: 'UNWISE_GREEN',       flavor: 'DEDICATED'}]
    - [HETDEX_MAIN,         23, "See $SCND_DIR/sv1/docs/HETDEX_MAIN.txt",        {obsconditions: DARK,        filename: 'HETDEX_MAIN',        flavor: 'DEDICATED'}]
    - [HETDEX_HP,           24, "See $SCND_DIR/sv1/docs/HETDEX_HP.txt",          {obsconditions: DARK,        filename: 'HETDEX_HP',          flavor: 'DEDICATED'}]
#   - [PSF_OUT_BRIGHT,      25, "See $SCND_DIR",                                 {obsconditions: BRIGHT,      filename: 'PSF_OUT_BRIGHT',     flavor: 'SPARE'}]
#   - [PSF_OUT_DARK,        26, "See $SCND_DIR",                                 {obsconditions: DARK,        filename: 'PSF_OUT_DARK',       flavor: 'SPARE'}]
    - [HPM_SOUM,            27, "See $SCND_DIR/sv1/docs/HPM_SOUM.txt",           {obsconditions: DARK,        filename: 'HPM_SOUM',           flavor: 'SPARE'}]
    - [SN_HOSTS,            28, "See $SCND_DIR/sv1/docs/SN_HOSTS.txt",           {obsconditions: DARK,        filename: 'SN_HOSTS',           flavor: 'SPARE'}]
    - [GAL_CLUS_BCG,        29, "See $SCND_DIR/sv1/docs/GAL_CLUS_BCG.txt",       {obsconditions: DARK,        filename: 'GAL_CLUS_BCG',       flavor: 'SPARE'}]
    - [GAL_CLUS_2ND,        30, "See $SCND_DIR/sv1/docs/GAL_CLUS_2ND.txt",       {obsconditions: DARK,        filename: 'GAL_CLUS_2ND',       flavor: 'SPARE'}]
    - [GAL_CLUS_SAT,        31, "See $SCND_DIR/sv1/docs/GAL_CLUS_SAT.txt",       {obsconditions: DARK,        filename: 'GAL_CLUS_SAT',       flavor: 'SPARE'}]
    - [HSC_HIZ_SNE,         32, "See $SCND_DIR/sv1/docs/HSC_HIZ_SNE.txt",        {obsconditions: DARK,        filename: 'HSC_HIZ_SNE',        flavor: 'DEDICATED'}]
    - [ISM_CGM_QGP,         33, "See $SCND_DIR/sv1/docs/ISM_CGM_QGP.txt",        {obsconditions: DARK,        filename: 'ISM_CGM_QGP',        flavor: 'DEDICATED'}]
    - [STRONG_LENS,         34, "See $SCND_DIR/sv1/docs/STRONG_LENS.txt",        {obsconditions: DARK,        filename: 'STRONG_LENS',        flavor: 'SPARE'}]
    - [WISE_VAR_QSO,        35, "See $SCND_DIR/sv1/docs/WISE_VAR_QSO.txt",       {obsconditions: DARK,        filename: 'WISE_VAR_QSO',       flavor: 'QSO'}]
    - [MWS_CALIB,           36, "Stars with APOGEE/BOSS/GALAH/GAIAESO spectra",
        {obsconditions: DARK|GRAY|BRIGHT, filename: 'MWS_CALIB', flavor: 'SSV'}]
    - [BACKUP_CALIB,        37, "Very bright stars with APOGEE/BOSS/GALAH/GAIAESO spectra",
        {obsconditions: POOR|TWILIGHT12|TWILIGHT18, filename: 'BACKUP_CALIB', flavor: 'SSV'}]
    - [MWS_MAIN_CLUSTER_SV, 38, "Main survey low mass and metal poor stars (OC/GC/dwarf/stream members)",
        {obsconditions: DARK|GRAY|BRIGHT, filename: 'MWS_MAIN_CLUSTER_SV', flavor: 'SSV'}]
    - [MWS_RRLYR,           39, "Main survey halo tracers (RR Lyrae)",
        {obsconditions: DARK|GRAY|BRIGHT, filename: 'MWS_RRLYR', flavor: 'SSV'}]
    - [BRIGHT_HPM,          40, "See $SCND_DIR/sv1/docs/BRIGHT_HPM.txt",         {obsconditions: BRIGHT,      filename: 'BRIGHT_HPM',         flavor: 'SPARE'}]
    - [WD_BINARIES_BRIGHT,  41, "See $SCND_DIR/sv1/docs/WD_BINARIES_BRIGHT.txt", {obsconditions: BRIGHT,      filename: 'WD_BINARIES_BRIGHT', flavor: 'SPARE'}]
    - [WD_BINARIES_DARK,    42, "See $SCND_DIR/sv1/docs/WD_BINARIES_DARK.txt",   {obsconditions: DARK,        filename: 'WD_BINARIES_DARK',   flavor: 'SPARE'}]

#- Observation State
#- if a target passes more than one target bit, it is possible that one bit
#- will consider the observations "DONE" while another bit will want "MORE".
#- DONOTOBSERVE trumps MORE which trumps DONE
#- ADM It's possible that we'll want different obsmask criteria compared
#- ADM to the obsmask in targetmask.yaml for the main survey
#- ADM (but it's unlikely we'll want different *obsconditions* or *targetids*
sv1_obsmask:
    - [UNOBS,       0, "unobserved"]
    - [OBS,         1, "observed but no spectro pipeline answer yet"]
    - [DONE,        2, "enough observations already obtained"]
    - [MORE_ZWARN,  3, "ambiguous redshift; need more observations"]
    - [MORE_ZGOOD,  4, "redshift known; need more observations"]
    - [DONOTOBSERVE,  16, "Do not observe this target (possibly temporarily)"]

#- Priorities for each target bit
#- Numerically larger priorities are higher priority to be observed first.
#- NOTE: these aren't a bitmask, they are a mapping from bit -> priority
#- SAME_AS_XXX means to use the priorities for bitname XXX
#- -1 means the concept of priority doesn't really apply to this target class
#- Every target bit must define priority for "UNOBS"
#- Default priority for "MORE_ZGOOD" is same as "UNOBS"
#- Other states are default 1 unless specified here
priorities:
    #- Dark Survey: priorities 3000 - 3999
    sv1_desi_mask:
        ELG: {UNOBS: 3000, DONE: 2, OBS: 1, DONOTOBSERVE: 0}
        LRG: {UNOBS: 3200, DONE: 2, OBS: 1, DONOTOBSERVE: 0}
# ADM The MORE_MIDZQSO priority is driven by secondary programs from Gontcho a Gontcho (1.4 < z < 2.1)
# ADM and Weiner et al. (0.7 < z < 2.1) to reobserve confirmed quasars where possible. The priority
# ADM of 100 should only be higher than DONE (and secondary filler) targets.
        QSO: {UNOBS: 3400, MORE_ZGOOD: 3350, MORE_ZWARN: 3300, MORE_MIDZQSO: 100, DONE: 2, OBS: 1, DONOTOBSERVE: 0}
        LRG_OPT: SAME_AS_LRG
        LRG_IR: SAME_AS_LRG
        LRG_SV_OPT: SAME_AS_LRG
        LRG_SV_IR: SAME_AS_LRG
        LOWZ_FILLER: {UNOBS: 10, DONE: 2, OBS: 1, DONOTOBSERVE: 0}
        ELG_SV_GTOT: SAME_AS_ELG
        ELG_SV_GFIB: SAME_AS_ELG
        ELG_FDR_GTOT: SAME_AS_ELG
        ELG_FDR_GFIB: SAME_AS_ELG
        QSO_COLOR_4PASS: SAME_AS_QSO
        QSO_RF_4PASS:    SAME_AS_QSO
        QSO_COLOR_8PASS: SAME_AS_QSO
        QSO_RF_8PASS:    SAME_AS_QSO
        QSO_HZ_F:        SAME_AS_QSO
        QSO_Z5:          SAME_AS_QSO
        # ADM don't prioritize a N/S target if it doesn't have other bits set
        LRG_OPT_NORTH: {UNOBS: 0, DONE: 0, OBS: 0, DONOTOBSERVE: 0}
        LRG_IR_NORTH: SAME_AS_LRG_OPT_NORTH
        LRG_SV_OPT_NORTH: SAME_AS_LRG_OPT_NORTH
        LRG_SV_IR_NORTH: SAME_AS_LRG_OPT_NORTH
        LOWZ_FILLER_NORTH: SAME_AS_LRG_OPT_NORTH
        LRG_OPT_SOUTH: SAME_AS_LRG_OPT_NORTH
        LRG_IR_SOUTH: SAME_AS_LRG_OPT_NORTH
        LRG_SV_OPT_SOUTH: SAME_AS_LRG_OPT_NORTH
        LRG_SV_IR_SOUTH: SAME_AS_LRG_OPT_NORTH
        LOWZ_FILLER_SOUTH: SAME_AS_LRG_OPT_NORTH
        ELG_SV_GTOT_NORTH: SAME_AS_LRG_OPT_NORTH
        ELG_SV_GFIB_NORTH: SAME_AS_LRG_OPT_NORTH
        ELG_FDR_GTOT_NORTH: SAME_AS_LRG_OPT_NORTH
        ELG_FDR_GFIB_NORTH: SAME_AS_LRG_OPT_NORTH
        ELG_SV_GTOT_SOUTH: SAME_AS_LRG_OPT_NORTH
        ELG_SV_GFIB_SOUTH: SAME_AS_LRG_OPT_NORTH
        ELG_FDR_GTOT_SOUTH: SAME_AS_LRG_OPT_NORTH
        ELG_FDR_GFIB_SOUTH: SAME_AS_LRG_OPT_NORTH
        QSO_COLOR_4PASS_NORTH: SAME_AS_LRG_OPT_NORTH
        QSO_RF_4PASS_NORTH:    SAME_AS_LRG_OPT_NORTH
        QSO_COLOR_8PASS_NORTH: SAME_AS_LRG_OPT_NORTH
        QSO_RF_8PASS_NORTH:    SAME_AS_LRG_OPT_NORTH
        QSO_HZ_F_NORTH:        SAME_AS_LRG_OPT_NORTH
        QSO_Z5_NORTH:          SAME_AS_LRG_OPT_NORTH
        QSO_COLOR_4PASS_SOUTH: SAME_AS_LRG_OPT_NORTH
        QSO_RF_4PASS_SOUTH:    SAME_AS_LRG_OPT_NORTH
        QSO_COLOR_8PASS_SOUTH: SAME_AS_LRG_OPT_NORTH
        QSO_RF_8PASS_SOUTH:    SAME_AS_LRG_OPT_NORTH
        QSO_HZ_F_SOUTH:        SAME_AS_LRG_OPT_NORTH
        QSO_Z5_SOUTH:          SAME_AS_LRG_OPT_NORTH
        BAD_SKY: {UNOBS: 0, OBS: 0, DONE: 0, MORE_ZWARN: 0, MORE_ZGOOD: 0}
        #- Standards and sky are treated specially; priorities don't apply
        STD_FAINT:  -1
        STD_WD:     -1
        SKY:        -1
        SUPP_SKY:   -1
        STD_BRIGHT: -1
        # STD_FAINT_BEST: -1
        # STD_BRIGHT_BEST: -1
        SV: -1
        NO_TARGET:  -1
        #- placeholders to show we haven't forgotten these bits, but the
        #- exact bits in the other sections define the priorities
        BRIGHT_OBJECT: -1
        IN_BRIGHT_OBJECT: -1
        NEAR_BRIGHT_OBJECT: -1
        BGS_ANY: -1
        MWS_ANY: -1
        SCND_ANY: -1

    #- Bright Galaxy Survey: priorities 2000-2997
    # ADM reserve 2998 for MWS_WD (ensuring a priority below Dark Survey targets, just in case)
    #- reobserving successes has lower priority than MWS
    sv1_bgs_mask:
        BGS_FAINT: {UNOBS: 2000, MORE_ZWARN: 2000, MORE_ZGOOD: 1000, DONE: 2, OBS: 1, DONOTOBSERVE: 0}
        BGS_BRIGHT: {UNOBS: 2100, MORE_ZWARN: 2100, MORE_ZGOOD: 1000, DONE: 2, OBS: 1, DONOTOBSERVE: 0}
        BGS_FAINT_EXT: {UNOBS: 2000, MORE_ZWARN: 2000, MORE_ZGOOD: 1000, DONE: 2, OBS: 1, DONOTOBSERVE: 0}
        BGS_LOWQ: {UNOBS: 2000, MORE_ZWARN: 2000, MORE_ZGOOD: 1000, DONE: 2, OBS: 1, DONOTOBSERVE: 0}
        BGS_FIBMAG: {UNOBS: 2000, MORE_ZWARN: 2000, MORE_ZGOOD: 1000, DONE: 2, OBS: 1, DONOTOBSERVE: 0}
        # ADM don't prioritize a N/S target if it doesn't have other bits set
        BGS_FAINT_SOUTH: {UNOBS: 0, MORE_ZWARN: 0, MORE_ZGOOD: 0, DONE: 0, OBS: 0, DONOTOBSERVE: 0}
        BGS_FAINT_NORTH: SAME_AS_BGS_FAINT_SOUTH
        BGS_BRIGHT_SOUTH: SAME_AS_BGS_FAINT_SOUTH
        BGS_BRIGHT_NORTH: SAME_AS_BGS_FAINT_SOUTH
        BGS_FAINT_EXT_SOUTH: SAME_AS_BGS_FAINT_SOUTH
        BGS_FAINT_EXT_NORTH: SAME_AS_BGS_FAINT_SOUTH
        BGS_LOWQ_SOUTH: SAME_AS_BGS_FAINT_SOUTH
        BGS_LOWQ_NORTH: SAME_AS_BGS_FAINT_SOUTH
        BGS_FIBMAG_SOUTH: SAME_AS_BGS_FAINT_SOUTH
        BGS_FIBMAG_NORTH: SAME_AS_BGS_FAINT_SOUTH
        BGS_KNOWN_ANY: {UNOBS: 100, MORE_ZWARN: 200, MORE_ZGOOD: 300, DONE: 2, OBS: 1, DONOTOBSERVE: 0}
        BGS_KNOWN_COLLIDED: {UNOBS: 100, MORE_ZWARN: 200, MORE_ZGOOD: 300, DONE: 2, OBS: 1, DONOTOBSERVE: 0}
        BGS_KNOWN_SDSS: {UNOBS: 100, MORE_ZWARN: 200, MORE_ZGOOD: 300, DONE: 2, OBS: 1, DONOTOBSERVE: 0}
        BGS_KNOWN_BOSS: {UNOBS: 100, MORE_ZWARN: 200, MORE_ZGOOD: 300, DONE: 2, OBS: 1, DONOTOBSERVE: 0}

    #- Milky Way Survey: priorities 1000-1999
    # ADM WDs should be prioritized above BGS at 2998
    sv1_mws_mask:
        # Special/Sparse targets
        # NB DONE is not very relevant here since we assign "infinite" observations
        MWS_WD:                       {UNOBS: 2998, DONE:  600, OBS: 1, DONOTOBSERVE: 0}
        # Note NEARBY > OC (otherwise nearby targets swamped by fainter OC members)
        MWS_NEARBY:                   {UNOBS: 1650, DONE:  500, OBS: 1, DONOTOBSERVE: 0}
        MWS_BHB:                      {UNOBS: 1450, DONE:  400, OBS: 1, DONOTOBSERVE: 0}

        # Main survey targets 
        MWS_MAIN_BROAD:                  {UNOBS: 1100, DONE: 200, OBS: 1, DONOTOBSERVE: 0}
        MWS_MAIN_FAINT:                  {UNOBS: 1050, DONE: 100, OBS: 1, DONOTOBSERVE: 0}
        # Permutations
        # ADM don't prioritize a N/S target if it doesn't have other bits set
        MWS_MAIN_BROAD_NORTH:            {UNOBS: 0, DONE: 0, OBS: 0, DONOTOBSERVE: 0}
        MWS_MAIN_BROAD_SOUTH:            SAME_AS_MWS_MAIN_BROAD_NORTH
        MWS_MAIN_FAINT_NORTH:      {UNOBS: 0, DONE: 0, OBS: 0, DONOTOBSERVE: 0}
        MWS_MAIN_FAINT_SOUTH:      SAME_AS_MWS_MAIN_FAINT_NORTH
        BACKUP_BRIGHT:                {UNOBS: 9, DONE: 9, OBS: 9, DONOTOBSERVE: 0}
        BACKUP_FAINT:                 {UNOBS: 8, DONE: 8, OBS: 8, DONOTOBSERVE: 0}
        BACKUP_VERY_FAINT:            {UNOBS: 7, DONE: 7, OBS: 7, DONOTOBSERVE: 0}
        # ADM Standards are special; priorities don't apply.
        GAIA_STD_FAINT:  -1
        GAIA_STD_WD:  -1
        GAIA_STD_BRIGHT:  -1

    # ADM secondary target priorities. Probably all have very low UNOBS
    sv1_scnd_mask:
        VETO:                  {UNOBS:  0, DONE: 0, OBS: 0, DONOTOBSERVE: 0}
        UDG:                   {UNOBS: 1900, DONE:    2, OBS: 1, DONOTOBSERVE: 0}
        FIRST_MALS:            {UNOBS: 1025, DONE:    2, OBS: 1, DONOTOBSERVE: 0}
#       WD_BINARIES:           {UNOBS: 1998, DONE:    2, OBS: 1, DONOTOBSERVE: 0}
        LBG_TOMOG:             {UNOBS: 1800, DONE:    2, OBS: 1, DONOTOBSERVE: 0}
        QSO_RED:               {UNOBS: 3400, MORE_ZGOOD: 3350, MORE_ZWARN: 3300, DONE: 2, OBS: 1, DONOTOBSERVE: 0}
# ADM LBG_TOMOG is the first dedicated program to be listed.
# ADM Other dedicated programs will have a similar priority to LBG_TOMOG.
        M31_KNOWN:             SAME_AS_LBG_TOMOG
        M31_QSO:               SAME_AS_LBG_TOMOG
        M31_STAR:              SAME_AS_LBG_TOMOG
#       MWS_DDOGIANTS:         {UNOBS: 1450, DONE:    2, OBS: 1, DONOTOBSERVE: 0}
        MWS_CLUS_GAL_DEEP:     SAME_AS_LBG_TOMOG
        LOW_MASS_AGN:          {UNOBS: 1025, DONE:    2, OBS: 1, DONOTOBSERVE: 0}
        FAINT_HPM:             SAME_AS_LOW_MASS_AGN
        GW190412:              {UNOBS: 5000, DONE:    2, OBS: 1, DONOTOBSERVE: 0}
        IC134191:              SAME_AS_GW190412
        PV_BRIGHT:             {UNOBS: 1700, DONE:    2, OBS: 1, DONOTOBSERVE: 0}
        PV_DARK:               {UNOBS: 1700, DONE:    2, OBS: 1, DONOTOBSERVE: 0}
        LOW_Z:                 {UNOBS: 90, DONE:    2, OBS: 1, DONOTOBSERVE: 0}
        BHB:                   {UNOBS: 1950, DONE:    2, OBS: 1, DONOTOBSERVE: 0}
        SPCV:                  SAME_AS_LOW_MASS_AGN
        DC3R2_GAMA:            SAME_AS_LOW_MASS_AGN
        UNWISE_BLUE:           SAME_AS_LBG_TOMOG
        UNWISE_GREEN:          SAME_AS_LBG_TOMOG
        HETDEX_MAIN:           SAME_AS_LBG_TOMOG
        HETDEX_HP:             SAME_AS_LBG_TOMOG
#       PSF_OUT_BRIGHT:        {UNOBS: 70, DONE:    2, OBS: 1, DONOTOBSERVE: 0}
#       PSF_OUT_DARK:          SAME_AS_PSF_OUT_BRIGHT
        HPM_SOUM:              SAME_AS_LOW_MASS_AGN
        SN_HOSTS:              SAME_AS_BHB
        GAL_CLUS_BCG:          {UNOBS: 1025, DONE:    2, OBS: 1, DONOTOBSERVE: 0}
        GAL_CLUS_2ND:          {UNOBS: 1024, DONE:    2, OBS: 1, DONOTOBSERVE: 0}
        GAL_CLUS_SAT:          {UNOBS: 200,  DONE:    2, OBS: 1, DONOTOBSERVE: 0}
        HSC_HIZ_SNE:           SAME_AS_LBG_TOMOG
        ISM_CGM_QGP:           {UNOBS: 4100, DONE:    2, OBS: 1, DONOTOBSERVE: 0}
        STRONG_LENS:           SAME_AS_UDG
        WISE_VAR_QSO:          SAME_AS_QSO_RED
        MWS_CALIB:             {UNOBS: 2995, DONE:    2, OBS: 1, DONOTOBSERVE: 0}
        BACKUP_CALIB:          SAME_AS_MWS_CALIB
        MWS_MAIN_CLUSTER_SV:   {UNOBS: 1450, DONE:  400, OBS: 1, DONOTOBSERVE: 0}
        MWS_RRLYR:             {UNOBS: 1450, DONE:  400, OBS: 1, DONOTOBSERVE: 0}
        BRIGHT_HPM:            SAME_AS_LOW_MASS_AGN
        WD_BINARIES_BRIGHT:    {UNOBS: 1998, DONE:    2, OBS: 1, DONOTOBSERVE: 0}
        WD_BINARIES_DARK:      {UNOBS: 1998, DONE:    2, OBS: 1, DONOTOBSERVE: 0}

# ADM INITIAL number of observations (NUMOBS) for each target bit
# ADM SAME_AS_XXX means to use the NUMOBS for bitname XXX
# ADM -1 means that the concept of NUMOBS doesn't apply to this bit
numobs:
    # ADM initial number of observations for targets in the main (dark time) survey
    sv1_desi_mask:
        ELG: 1
        LRG: 2
        QSO: 4
        LRG_OPT: 4
        LRG_IR: 4
        LRG_SV_OPT: 4
        LRG_SV_IR: 4
        LOWZ_FILLER: 1
        ELG_SV_GTOT: SAME_AS_ELG
        ELG_SV_GFIB: SAME_AS_ELG
        ELG_FDR_GTOT: SAME_AS_ELG
        ELG_FDR_GFIB: SAME_AS_ELG
        QSO_COLOR_4PASS: 4
        QSO_RF_4PASS:    4
        QSO_COLOR_8PASS: 8
        QSO_RF_8PASS:    8
        QSO_HZ_F:        SAME_AS_QSO
        QSO_Z5:          SAME_AS_QSO
        # ADM don't observe a N/S target if it doesn't have other bits set
        LRG_OPT_NORTH:  0
        LRG_IR_NORTH: 0
        LRG_SV_OPT_NORTH:  0
        LRG_SV_IR_NORTH: 0
        LOWZ_FILLER_NORTH: 0
        LRG_OPT_SOUTH:  0
        LRG_IR_SOUTH: 0
        LRG_SV_OPT_SOUTH:  0
        LRG_SV_IR_SOUTH: 0
        LOWZ_FILLER_SOUTH: 0
        ELG_SV_GTOT_NORTH: 0
        ELG_SV_GFIB_NORTH: 0
        ELG_FDR_GTOT_NORTH: 0
        ELG_FDR_GFIB_NORTH: 0
        ELG_SV_GTOT_SOUTH: 0
        ELG_SV_GFIB_SOUTH: 0
        ELG_FDR_GTOT_SOUTH: 0
        ELG_FDR_GFIB_SOUTH: 0
        QSO_COLOR_4PASS_NORTH: 0
        QSO_RF_4PASS_NORTH:    0
        QSO_COLOR_8PASS_NORTH: 0
        QSO_RF_8PASS_NORTH:    0
        QSO_HZ_F_NORTH:        0
        QSO_Z5_NORTH:          0
        QSO_COLOR_4PASS_SOUTH: 0
        QSO_RF_4PASS_SOUTH:    0
        QSO_COLOR_8PASS_SOUTH: 0
        QSO_RF_8PASS_SOUTH:    0
        QSO_HZ_F_SOUTH:        0
        QSO_Z5_SOUTH:          0
        BAD_SKY: 0
        #- Standards and sky are treated specially; NUMOBS doesn't apply
        STD_FAINT:  -1
        STD_WD:     -1
        SKY:        -1
        SUPP_SKY:   -1
        STD_BRIGHT: -1
        # STD_FAINT_BEST: -1
        # STD_BRIGHT_BEST: -1
        SV: -1
        NO_TARGET:  -1
        #- placeholders to show we haven't forgotten these bits, but the
        #- exact bits in the other sections define the number of observations
        BRIGHT_OBJECT: -1
        IN_BRIGHT_OBJECT: -1
        NEAR_BRIGHT_OBJECT: -1
        BGS_ANY: -1
        MWS_ANY: -1
        SCND_ANY: -1

    # ADM initial number of observations for targets in the Bright Galaxy Survey
    sv1_bgs_mask:
        BGS_FAINT: 1
        BGS_BRIGHT: 1
        BGS_FAINT_EXT: 1
        BGS_LOWQ: 1
        BGS_FIBMAG: 1
        # ADM don't observe a N/S target if it doesn't have other bits set
        BGS_FAINT_SOUTH: 0
        BGS_FAINT_NORTH: 0
        BGS_BRIGHT_SOUTH: 0
        BGS_BRIGHT_NORTH: 0
        BGS_FAINT_EXT_SOUTH: 0
        BGS_FAINT_EXT_NORTH: 0
        BGS_LOWQ_SOUTH: 0
        BGS_LOWQ_NORTH: 0
        BGS_FIBMAG_SOUTH: 0
        BGS_FIBMAG_NORTH: 0
        BGS_KNOWN_ANY: 1
        BGS_KNOWN_COLLIDED: 1
        BGS_KNOWN_SDSS: 1
        BGS_KNOWN_BOSS: 1

    # ADM initial number of observations for targets in the Milky Way Survey
    sv1_mws_mask:
        MWS_MAIN_BROAD:               1
        MWS_MAIN_FAINT:               1
        MWS_NEARBY:                 100
        MWS_WD:                     100
        MWS_BHB:                    100
        # ADM don't observe a N/S target if it doesn't have other bits set
        MWS_MAIN_BROAD_NORTH:            0
        MWS_MAIN_BROAD_SOUTH:            0
        MWS_MAIN_FAINT_NORTH:      0
        MWS_MAIN_FAINT_SOUTH:      0
        BACKUP_BRIGHT:                1
        BACKUP_FAINT:                 SAME_AS_BACKUP_BRIGHT
        BACKUP_VERY_FAINT:            SAME_AS_BACKUP_BRIGHT
        # ADM Standards are special; numobs doesn't apply.
        GAIA_STD_FAINT:  -1
        GAIA_STD_WD:  -1
        GAIA_STD_BRIGHT:  -1

    # ADM initial number of observations for secondary targets
    sv1_scnd_mask:
        VETO:                     1
        UDG:                    100
        FIRST_MALS:             100
#       WD_BINARIES:            100
        LBG_TOMOG:              100
        QSO_RED:                100
        M31_KNOWN:              100
        M31_QSO:                100
        M31_STAR:               100
#       MWS_DDOGIANTS:          100
        MWS_CLUS_GAL_DEEP:      100
        LOW_MASS_AGN:           100
        FAINT_HPM:              100
        GW190412:               100
        IC134191:               100
        PV_BRIGHT:              100
        PV_DARK:                100
        LOW_Z:                  100
        BHB:                    100
        SPCV:                   100
        DC3R2_GAMA:             100
        UNWISE_BLUE:            100
        UNWISE_GREEN:           100
        HETDEX_MAIN:            100
        HETDEX_HP:              100
#       PSF_OUT_BRIGHT:         100
#       PSF_OUT_DARK:           100
        HPM_SOUM:               100
        SN_HOSTS:               100
        GAL_CLUS_BCG:           100
        GAL_CLUS_2ND:           100
        GAL_CLUS_SAT:           100
        HSC_HIZ_SNE:            100
        ISM_CGM_QGP:            100
        STRONG_LENS:            100
        WISE_VAR_QSO:           100
        MWS_CALIB:              100
        MWS_MAIN_CLUSTER_SV:      1
        MWS_RRLYR:              100
        BACKUP_CALIB:           SAME_AS_MWS_CALIB
        BRIGHT_HPM:             100
        WD_BINARIES_BRIGHT:     100
        WD_BINARIES_DARK:       100
